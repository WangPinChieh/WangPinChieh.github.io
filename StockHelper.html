<!DOCTYPE>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<link rel="stylesheet" href="http://wangpinchieh.github.io/jquery_mobile/jquery.mobile-1.4.5.css" /> 
<script src="http://wangpinchieh.github.io/jquery_mobile/jquery.mobile-1.4.5.js"></script>
<script src="http://WangPinChieh.github.io/functions.js"></script>
<style>
.GreenText {
	color: green;
}
.RedText {
	color: red;
}
</style>
</head>
<body>
<script>
	$(document).ready(function(){
		$('#ProcessBtn').click(function(){
			$('#ResultTable').text('');
			var BuyPrice = $('#BuyPrice').val();
			var SellPrice = $('#SellPrice').val();
			var Unit = $('#Unit').val();
			var FeeRate = $('#FeeRate').val();
			var TaxRate = $('#TaxRate').val();
			if(isStrNullorEmpty(BuyPrice) || isStrNullorEmpty(Unit) || isStrNullorEmpty(FeeRate) || isStrNullorEmpty(TaxRate))
				return;
			var result = Process(parseFloat(BuyPrice), parseFloat(SellPrice), parseFloat(Unit), parseFloat(FeeRate), parseFloat(TaxRate));
			$('#ResultTable').append('<table data-role="table" class="ui-responsive">');
			$('#ResultTable').append('<thead><tr><td style="width: 100;"><strong>賣價</strong></td><td><strong>獲利</strong></td></tr></thead>');
			$('#ResultTable').append('<tbody>');
			for(var i=0; i<result.length; i++)
			{
				$('#ResultTable').append('<tr><td>'+result[i].SellPrice+'</td><td>'+result[i].NetProfit+'</td></tr>');
			}
			$('#ResultTable').append('</tbody>');
			$('#ResultTable').append('</table>');
		});
	});
</script>
<div data-role="collapsible" data-content-theme="true">
<h4>股票小幫手</h4>
<table>
<tr><td>
<label for='BuyPrice'>買價：</label>
</td><td>
<input type='number' id='BuyPrice' data-clear-btn='true'  step='any'/>
<td></tr>

<tr><td>
<label for='SellPrice'>賣價(Optional)：</label>
</td><td>
<input type='number' id='SellPrice' data-clear-btn='true'   step='any'/>
</td></tr>

<tr><td>
<label for='Unit'>張數：</label>
</td><td>
<input type='number' id='Unit' data-clear-btn='true' />
</td></tr>

<tr><td>
<label for='FeeRate'>下單手續費率：</label>
</td><td>
<input type='number' id='FeeRate' data-clear-btn='true'  step='any'/>
</td></tr>

<tr><td>
<label for='TaxRate'>證交稅率：</label>
</td><td>
<input type='number' id='TaxRate' value='0.003' data-clear-btn='true' step='any'/>
</td></tr>

<tr><td colspan='2' align='right'>
<!--<button id='ProcessBtn' class='ui-btn'>Process</button>-->
<a href='#ResultTable' id='ProcessBtn' class="ui-btn ui-corner-all ui-shadow ui-btn-inline" data-rel="popup" data-position-to="window">試算</a>
</td></tr>
</table>
<div id='ResultTable' data-role="popup" style="overflow-y: scroll; height:300px;"></div>
</div>
<div data-role="collapsible" data-content-theme="true">
<h4>歷史查詢</h4>
</div>
</body>
</html>